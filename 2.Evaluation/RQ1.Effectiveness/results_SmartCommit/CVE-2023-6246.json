{
    "0": "-    char *buf = NULL;\n-    size_t bufsize = 0;\n\n+    char *buf = bufs;\n+    size_t bufsize;\n\n",
    "1": "-    int l;\n\n+    int l, vl;\n\n",
    "2": "+    char *pos;\n+    size_t len;\n\n",
    "3": "+        pos = bufs + l;\n+        len = sizeof (bufs) - l;\n+    } else {\n+        buf = NULL;\n+        pos = bufs;\n+        len = sizeof (bufs);\n+    }\n+    {\n\n",
    "4": "-        int vl = __vsnprintf_internal (bufs + l, sizeof bufs - l, fmt, apc, mode_flags);\n-        if (0 <= vl && vl < sizeof bufs - l) {\n-            buf = bufs;\n\n+        vl = __vsnprintf_internal (pos, len, fmt, apc, mode_flags);\n+        if (!(0 <= vl && vl < len)) {\n+            buf = NULL;\n\n-    char *buf = bufs;\n-    size_t bufsize;\n\n+    char *buf = NULL;\n+    size_t bufsize = 0;\n\n-    char *pos;\n-    size_t len;\n\n-        pos = bufs + l;\n-        len = sizeof (bufs) - l;\n-    } else {\n-        buf = NULL;\n-        pos = bufs;\n-        len = sizeof (bufs);\n-    }\n-    {\n\n-        vl = __vsnprintf_internal (pos, len, fmt, apc, mode_flags);\n-        if (!(0 <= vl && vl < len)) {\n-            buf = NULL;\n\n+        int vl = __vsnprintf_internal (bufs + l, sizeof bufs - l, fmt, apc, mode_flags);\n+        if (0 <= vl && vl < sizeof bufs - l) {\n+            buf = bufs;\n\n",
    "5": "-    int l, vl;\n\n+    int l;\n\n"
}