{
    "0": "+    size_t used = 0;\n+    BYTE* pConcatenated = NULL;\n\n",
    "1": "+    WPR_ASSERT(ppDstData);\n+    WPR_ASSERT(pDstSize);\n+    *ppDstData = NULL;\n+    *pDstSize = 0;\n\n",
    "2": "-        *ppDstData = NULL;\n\n",
    "3": "-            *ppDstData = aligned_zgfx_malloc(zgfx->OutputCount);\n\n+            if (!zgfx_append(zgfx, &pConcatenated, zgfx->OutputCount, &used)) {\n+                goto fail;\n\n-        if (!*ppDstData) {\n\n+            if (used != zgfx->OutputCount) {\n\n-        CopyMemory(*ppDstData, zgfx->OutputBuffer, zgfx->OutputCount);\n\n+        }\n\n-            if (zgfx->OutputCount > UT32_MAX - used) {\n\n+            if (!zgfx_append(zgfx, &pConcatenated, uncompressedSize, &used)) {\n\n-            if (used + zgfx->OutputCount > uncompressedSize) {\n-                goto fail;\n\n-            CopyMemory(pConcatenated, zgfx->OutputBuffer, zgfx->OutputCount);\n-            pConcatenated += zgfx->OutputCount;\n-            used += zgfx->OutputCount;\n\n+        if (used != uncompressedSize) {\n+            goto fail;\n\n-    size_t used = 0;\n-    BYTE* pConcatenated = NULL;\n\n-    WPR_ASSERT(ppDstData);\n-    WPR_ASSERT(pDstSize);\n-    *ppDstData = NULL;\n-    *pDstSize = 0;\n\n+        *ppDstData = NULL;\n\n-            if (!zgfx_append(zgfx, &pConcatenated, zgfx->OutputCount, &used)) {\n-                goto fail;\n\n+            *ppDstData = aligned_zgfx_malloc(zgfx->OutputCount);\n\n-            if (used != zgfx->OutputCount) {\n\n+        if (!*ppDstData) {\n\n-            *ppDstData = pConcatenated;\n\n-        }\n\n+        CopyMemory(*ppDstData, zgfx->OutputBuffer, zgfx->OutputCount);\n\n+        BYTE* pConcatenated = NULL;\n+        size_t used = 0;\n\n+        if (!Stream_CheckAndLogRequiredLengthOfSize(TAG, stream, segmentCount, sizeof(UT32))) {\n+            goto fail;\n+        }\n+        pConcatenated = aligned_zgfx_malloc(uncompressedSize);\n+        if (!pConcatenated) {\n+            goto fail;\n+        }\n+        *ppDstData = pConcatenated;\n+        *pDstSize = uncompressedSize;\n\n-            if (!zgfx_append(zgfx, &pConcatenated, uncompressedSize, &used)) {\n\n+            if (zgfx->OutputCount > UT32_MAX - used) {\n\n-        }\n-        if (used != uncompressedSize) {\n\n+            if (used + zgfx->OutputCount > uncompressedSize) {\n\n-        *ppDstData = pConcatenated;\n-        *pDstSize = uncompressedSize;\n\n+            CopyMemory(pConcatenated, zgfx->OutputBuffer, zgfx->OutputCount);\n+            pConcatenated += zgfx->OutputCount;\n+            used += zgfx->OutputCount;\n+        }\n\n-    if (status < 0) {\n-        free(pConcatenated);\n-    }\n\n",
    "4": "+            *ppDstData = pConcatenated;\n\n",
    "5": "-        BYTE* pConcatenated = NULL;\n-        size_t used = 0;\n\n",
    "6": "-        if (!Stream_CheckAndLogRequiredLengthOfSize(TAG, stream, segmentCount, sizeof(UT32))) {\n-            goto fail;\n-        }\n-        pConcatenated = aligned_zgfx_malloc(uncompressedSize);\n-        if (!pConcatenated) {\n-            goto fail;\n-        }\n-        *ppDstData = pConcatenated;\n-        *pDstSize = uncompressedSize;\n\n",
    "7": "+        *ppDstData = pConcatenated;\n+        *pDstSize = uncompressedSize;\n\n",
    "8": "+    if (status < 0) {\n+        free(pConcatenated);\n+    }\n\n"
}