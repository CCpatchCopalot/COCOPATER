{
    "0": "+    union net_sockaddr naddr = { 0 };\n+    socklen_t naddr_len = sizeof(naddr);\n\n",
    "1": "-    ret = getsockname(fd, ptr->ai_addr, &ptr->ai_addrlen);\n\n+    ret = getsockname(fd, &naddr.sa, &naddr_len);\n\n-    net_port_get(port, (union net_sockaddr *)ptr->ai_addr);\n-    net_address_get(addr, sizeof(addr), (union net_sockaddr *)ptr->ai_addr);\n\n+    net_port_get(port, &naddr);\n+    net_address_get(addr, sizeof(addr), &naddr);\n\n-    union net_sockaddr naddr = { 0 };\n-    socklen_t naddr_len = sizeof(naddr);\n\n-    ret = getsockname(fd, &naddr.sa, &naddr_len);\n\n+    ret = getsockname(fd, ptr->ai_addr, &ptr->ai_addrlen);\n\n-        DPRTF(E_LOG, L_MISC, \"Error finding address of service '%s': %s\\n\", log_service_name, strerror(errno));\n-        goto error;\n-    } else if (naddr_len > sizeof(naddr)) {\n-        DPRTF(E_LOG, L_MISC, \"Unexpected address length of service '%s'\\n\", log_service_name);\n\n+        DPRTF(E_LOG, L_MISC, \"Could not find address of service '%s': %s\\n\", log_service_name, strerror(errno));\n\n-    net_port_get(port, &naddr);\n-    net_address_get(addr, sizeof(addr), &naddr);\n\n+    net_port_get(port, (union net_sockaddr *)ptr->ai_addr);\n+    net_address_get(addr, sizeof(addr), (union net_sockaddr *)ptr->ai_addr);\n\n",
    "2": "-        DPRTF(E_LOG, L_MISC, \"Could not find address of service '%s': %s\\n\", log_service_name, strerror(errno));\n\n+        DPRTF(E_LOG, L_MISC, \"Error finding address of service '%s': %s\\n\", log_service_name, strerror(errno));\n+        goto error;\n+    } else if (naddr_len > sizeof(naddr)) {\n+        DPRTF(E_LOG, L_MISC, \"Unexpected address length of service '%s'\\n\", log_service_name);\n\n"
}