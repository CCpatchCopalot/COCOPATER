{
    "0": "+    if (info->pixel_format != media::PIXEL_FORMAT_ARGB) {\n+        DLOG(ERROR) << \"Unsupported pixel format \" << info->pixel_format;\n+        return;\n+    }\n\n",
    "1": "-    if (info->pixel_format != media::PIXEL_FORMAT_ARGB) {\n-        DLOG(ERROR) << \"Unsupported pixel format \" << info->pixel_format;\n-        return;\n-    }\n\n",
    "2": "-    bool size_result = viz::ResourceSizes::MaybeSizeInBytes( pixel_size, viz::SinglePlaneFormat::kRGBA_8888, &expected_bytes);\n-    if (!size_result) {\n\n+    if (!viz::ResourceSizes::MaybeSizeInBytes( pixel_size, viz::SinglePlaneFormat::kRGBA_8888, &expected_bytes)) {\n+        DLOG(ERROR) << \"OnAllocatedSharedMemory with size that overflows\";\n+        return;\n+    }\n+    auto mapping = region.Map();\n+    if (!mapping.IsValid()) {\n+        DLOG(ERROR) << \"Shared memory mapping failed.\";\n+        return;\n+    }\n+    if (mapping.size() < expected_bytes) {\n+        DLOG(ERROR) << \"Shared memory size was less than expected.\";\n\n-    shared_memory_ = region.Map();\n-    DCHECK(shared_memory_.IsValid());\n\n+    shared_memory_ = std::move(mapping);\n\n-    if (!viz::ResourceSizes::MaybeSizeInBytes( pixel_size, viz::SinglePlaneFormat::kRGBA_8888, &expected_bytes)) {\n-        DLOG(ERROR) << \"OnAllocatedSharedMemory with size that overflows\";\n-        return;\n-    }\n-    auto mapping = region.Map();\n-    if (!mapping.IsValid()) {\n-        DLOG(ERROR) << \"Shared memory mapping failed.\";\n-        return;\n-    }\n-    if (mapping.size() < expected_bytes) {\n-        DLOG(ERROR) << \"Shared memory size was less than expected.\";\n\n+    bool size_result = viz::ResourceSizes::MaybeSizeInBytes( pixel_size, viz::SinglePlaneFormat::kRGBA_8888, &expected_bytes);\n+    if (!size_result) {\n\n-    shared_memory_ = std::move(mapping);\n\n+    shared_memory_ = region.Map();\n+    DCHECK(shared_memory_.IsValid());\n\n"
}